{% extends 'layout.html.twig' %}

{% block stylesheets %}
    {{parent()}}
{%endblock%}

{% block body %}
    {{parent()}}
    <h1 class="titresH1">Liste des fournisseurs </h1>
    {%if rechercheEffectuee is defined %}
        <div class='center'>
            <button class="btn btn-primary" onclick="document.location = '{{path('menu_fournisseurs',{'page':1})}}';">Réinitialiser recherche</button>
        </div>
    {%endif%}
    <div class='container-fluid'>
        <div class='row'>
            <div class='col-md-12'>
                <div id='blockMainMenuPatients'>
                    <table class="table table-striped table-light table-hover tableCenter">
                        <thead class="thead-dark"> 
                            <tr>
                                <th>Nom<br>
                                <input type="text" class="recherche" id="searchNom" placeholder="Chercher par nom">
                                <a href="" id="btSearchNom"> <button class='btRecherche' >Rechercher</button></a></th>
                                <th>Téléphone<br>
                                <input type="text" class="recherche" id="searchTel" placeholder="Chercher par n° de téléphone">
                                <a href="" id="btSearchTel"> <button class='btRecherche' >Rechercher</button></a></th>
                                <th>Mail<br>
                                <input type="text" class="recherche" id="searchMail" placeholder="Chercher par n° de téléphone">
                                <a href="" id="btSearchMail"> <button class='btRecherche' >Rechercher</button></a></th>
                                <th>Site web<br>
                                <input type="text" class="recherche" id="searchSW" placeholder="Chercher par n° de téléphone">
                                <a href="" id="btSearchSW"> <button class='btRecherche' >Rechercher</button></a></th>
                                <th>Adresse<br>
                                <input type="text" class="recherche" id="searchAdr" placeholder="Chercher par n° de téléphone">
                                <a href="" id="btSearchAdr"> <button class='btRecherche' >Rechercher</button></a></th>
                                <th>Observations<br>
                                <input type="text" class="recherche" id="searchObs" placeholder="Chercher par n° de téléphone">
                                <a href="" id="btSearchObs"> <button class='btRecherche' >Rechercher</button></a></th>
                                <th>Modifier</th>
                                <th>Supprimer</th>
                            </tr>
                        </thead>
                        <tbody >
                        {% for fournisseur in listFournisseurs %}
                            <tr onclick="document.location = '{{ path('fiche_fournisseur',{'idFournisseur': fournisseur.id}) }}';">
                                <td> {{fournisseur.nom}} </td>
                                <td>{{fournisseur.numTelephone}} </td>
                                <td>{{fournisseur.mail}} </td>
                                <td>{{fournisseur.siteWeb}} </td>
                                <td>{{fournisseur.adresse}}</td>
                                <td>{{fournisseur.observations}}</td>
                                <td><a href='{{ path('editer_fournisseur',{'idFournisseur':fournisseur.id}) }}'><i class="fas fa-edit glyphMenu" ></i></a></td>
                                <td><a href='{{ path('supprimer_fournisseur',{'idFournisseur':fournisseur.id}) }}'>  <i class="fas fa-trash-alt glyphMenu"  ></i></a></td>
                            </tr>
                        {%endfor%}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        {%if html is defined %}
        <div class='row'>
            <div class='col-md-12  '>
                <div class="">{{html|raw}}</div>
            </div>
        </div>
        {%endif%}
        <div class="MenuBasCentre" >
            <a href="{{ path('menu_parametres')}}"><input type="button"  class="btn btn-primary" value="Retour"></a>
            <a href="{{ path('ajouter_fournisseur')}}"><input type="button" class="btn btn-primary" value="Ajouter un fournisseur"></a>
        </div>
    </div>
{%endblock%}
{% block javascripts %}
       {{parent()}}
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
        <script>    
        //Recherche sur nom
        $("#searchNom").on('keyup', function() { // everytime keyup event
            value=$('#searchNom').val();
            var pathToRedirect ='{{path('rechercher_fournisseur',{'Entite':'Fournisseur','champ':'nom','valeur':'Erreur'})}}';
            var finalPath=pathToRedirect.replace("Erreur", value);
            document.getElementById("btSearchNom").href=finalPath; 
        });
        
        //Recherche sur téléphone
        $("#searchTel").on('keyup', function() { // everytime keyup event
            value=$('#searchTel').val();
            var pathToRedirect ='{{path('rechercher_fournisseur',{'Entite':'Fournisseur','champ':'numTelephone','valeur':'Erreur'})}}';
            var finalPath=pathToRedirect.replace("Erreur", value);
            document.getElementById("btSearchTel").href=finalPath; 
        });
        
         //Recherche sur mail
        $("#searchMail").on('keyup', function() { // everytime keyup event
            value=$('#searchMail').val();
            var pathToRedirect ='{{path('rechercher_fournisseur',{'Entite':'Fournisseur','champ':'mail','valeur':'Erreur'})}}';
            var finalPath=pathToRedirect.replace("Erreur", value);
            document.getElementById("btSearchMail").href=finalPath; 
        });
        
         //Recherche sur site web
        $("#searchSW").on('keyup', function() { // everytime keyup event
            value=$('#searchSW').val();
            var pathToRedirect ='{{path('rechercher_fournisseur',{'Entite':'Fournisseur','champ':'siteWeb','valeur':'Erreur'})}}';
            var finalPath=pathToRedirect.replace("Erreur", value);
            document.getElementById("btSearchSW").href=finalPath; 
        });
        
         //Recherche sur adresse
        $("#searchAdr").on('keyup', function() { // everytime keyup event
            value=$('#searchAdr').val();
            var pathToRedirect ='{{path('rechercher_fournisseur',{'Entite':'Fournisseur','champ':'adresse','valeur':'Erreur'})}}';
            var finalPath=pathToRedirect.replace("Erreur", value);
            document.getElementById("btSearchAdr").href=finalPath; 
        });
        
        //Recherche sur observations
        $("#searchObs").on('keyup', function() { // everytime keyup event
            value=$('#searchObs').val();
            var pathToRedirect ='{{path('rechercher_fournisseur',{'Entite':'Fournisseur','champ':'observations','valeur':'Erreur'})}}';
            var finalPath=pathToRedirect.replace("Erreur", value);
            document.getElementById("btSearchObs").href=finalPath; 
        });
     </script>  
{% endblock %}